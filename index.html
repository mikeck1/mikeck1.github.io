<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wavelength Game</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Roboto", sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background-color: #f0f0f0;
        background-image: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      }

      .game-container {
        text-align: center;
        background-color: white;
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        width: 600px;
        height: 600px;
      }

      .title {
        font-family: "Orbitron", sans-serif;
        font-size: 48px;
        font-weight: 700;
        color: #3742fa;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
        letter-spacing: 2px;
      }

      .subtitle {
        font-size: 24px;
        color: #2f3542;
        margin-bottom: 30px;
      }

      .board {
        width: 400px;
        height: 200px;
        background-color: #e0e0e0;
        border-radius: 200px 200px 0 0;
        position: relative;
        overflow: hidden;
        box-shadow: inset 0 5px 10px rgba(0, 0, 0, 0.1);
        margin: 0 auto;
      }

      .target-area {
        width: 400px;
        height: 200px;
        border-radius: 200px 200px 0 0;
        position: absolute;
        overflow: hidden;
      }

      .needle-container {
        position: absolute;
        bottom: 0;
        left: 50%;
        width: 40px; /* Increased width for larger click area */
        height: 180px;
        transform: translateX(-50%);
        cursor: pointer;
      }

      .needle {
        position: absolute;
        bottom: 0;
        left: 50%;
        width: 4px;
        height: 180px;
        background-color: #ff4757;
        transform-origin: bottom center;
        transition: transform 0.2s ease;
      }

      .clues-container {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-top: 20px;
        height: 60px; /* Adjust this value as needed */
      }

      .clue {
        flex: 1;
        font-size: 18px;
        font-weight: bold;
        color: #2f3542;
        text-align: center;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100%;
        padding: 0 10px;
      }

      .bidirectional-arrow {
        width: 100px;
        height: 2px;
        background-color: #3742fa;
        position: relative;
        margin: 0 20px;
        flex-shrink: 0;
      }

      .bidirectional-arrow::before,
      .bidirectional-arrow::after {
        content: "";
        position: absolute;
        top: 50%;
        width: 10px;
        height: 10px;
        border-top: 2px solid #3742fa;
        border-right: 2px solid #3742fa;
      }

      .bidirectional-arrow::before {
        left: 0;
        transform: translateY(-50%) rotate(-135deg);
      }

      .bidirectional-arrow::after {
        right: 0;
        transform: translateY(-50%) rotate(45deg);
      }

      @media (max-width: 768px) {
        .clues-container {
          flex-direction: row;
          height: auto;
          align-items: center;
          padding: 10px 0;
        }

        .clue {
          font-size: 14px;
          margin: 0;
          flex: 1;
          text-align: center;
          display: flex;
          align-items: center;
          justify-content: center;
          height: auto;
          min-height: 50px;
        }

        .bidirectional-arrow {
          width: 40px;
          margin: 0 10px;
        }
      }

      .controls {
        margin-top: 20px;
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 10px;
      }

      button {
        font-size: 16px;
        padding: 10px 20px;
        cursor: pointer;
        background-color: #5352ed;
        color: white;
        border: none;
        border-radius: 5px;
        transition: background-color 0.3s ease;
        flex: 1 0 auto;
        max-width: 150px;
      }

      button:hover {
        background-color: #3742fa;
      }

      #score,
      #totalScore {
        margin-top: 20px;
        font-size: 18px;
        font-weight: bold;
        color: #2f3542;
      }

      @media (max-width: 768px) {
        body {
          background-color: white;
        }

        .game-container {
          width: 100%;
          height: 100%;
          padding: 1rem;
          border-radius: 0;
          box-shadow: none;
        }

        .board {
          width: 300px;
          height: 150px;
          margin: 0 auto;
        }

        .target-area {
          width: 300px;
          height: 150px;
        }

        .needle {
          height: 130px;
          left: calc(50% - 4px);
        }

        .title {
          font-size: 36px;
        }

        .subtitle {
          font-size: 18px;
        }

        .clues {
          font-size: 18px;
        }

        button {
          font-size: 14px;
          padding: 8px 16px;
        }
      }
    </style>
  </head>

  <body>
    <div class="game-container">
      <h1 class="title">Wavelength</h1>
      <div class="subtitle">for FREE</div>
      <div class="board">
        <div class="target-area" id="targetArea"></div>
        <div class="needle-container" id="needleContainer">
          <div class="needle" id="needle"></div>
        </div>
      </div>
      <div class="clues-container">
        <div class="clue" id="leftClue"></div>
        <div class="bidirectional-arrow"></div>
        <div class="clue" id="rightClue"></div>
      </div>
      <div class="controls">
        <button id="toggleButton">Hide Target</button>
        <button id="nextRoundButton">Next Round</button>
        <button id="newGameButton" style="background-color: red; color: white">
          New Game
        </button>
      </div>
      <div id="score"></div>
      <div id="totalScore">Total Score: 0</div>
    </div>

    <script>
      const needleContainer = document.getElementById("needleContainer");
      const needle = document.getElementById("needle");
      const targetArea = document.getElementById("targetArea");
      const toggleButton = document.getElementById("toggleButton");
      const nextRoundButton = document.getElementById("nextRoundButton");
      const newGameButton = document.getElementById("newGameButton");
      const cluesElement = document.getElementById("clues");
      const scoreElement = document.getElementById("score");
      const totalScoreElement = document.getElementById("totalScore");

      let isDragging = false;
      let targetAngle = 0;
      let isTargetVisible = true;
      let totalScore = 0;
      let canMoveNeedle = false;

      const clues = [
        ["Bad Company", "Good Company"],
        ["Terrible Movie", "Great Movie"],
        ["Forgettable Person", "Memorable Person"],
        ["Culturally Insignificant", "Culturally Significant"],
        ["Dry Food", "Wet Food"],
        ["Easy to Do", "Hard to Do"],
        ["Feels Bad", "Feels Good"],
        ["Hairless", "Hairy"],
        ["Hard to Remember", "Easy to Remember"],
        ["Cold", "Hot"],
        ["Inflexible", "Flexible"],
        ["Clean Food", "Messy Food"],
        ["Proper Utensil Food", "Finger Food"],
        ["Want", "Need"],
        ["Weird Thing to Own", "Normal Thing to Own"],
        ["Poorly Made", "Well Made"],
        ["Quiet Place", "Loud Place"],
        ["Common", "Rare"],
        ["Bad Influence", "Role Model"],
        ["Pointy Animal", "Round Animal"],
        ["Hard", "Soft"],
        ["Ugly", "Beautiful"],
        ["Underpaid Job", "Overpaid Job"],
        ["Underrated Skill", "Overrated Skill"],
        ["Unsexy Emoji", "Sexy Emoji"],
        ["Useless", "Useful"],
        ["Villain", "Hero"],
        ["Worst Day Ever", "Best Day Ever"],
        ["Boring Hobby", "Exciting Hobby"],
        ["Useless Superpower", "Awesome Superpower"],
        ["Lame Party Trick", "Cool Party Trick"],
        ["Terrible First Date Spot", "Perfect First Date Spot"],
        ["Awkward Conversation Topic", "Engaging Conversation Topic"],
        ["Worst Pizza Topping", "Best Pizza Topping"],
        ["Annoying Sound", "Satisfying Sound"],
        ["Uncomfortable Clothing", "Comfy Clothing"],
        ["Worst Smell", "Best Smell"],
        ["Boring Class Subject", "Fascinating Class Subject"],
        ["Terrible Gift", "Thoughtful Gift"],
        ["Unhealthy Habit", "Healthy Habit"],
        ["Worst Chore", "Most Satisfying Chore"],
        ["Forgettable Song", "Catchy Song"],
        ["Useless App", "Must-Have App"],
        ["Terrible Supervillain Name", "Awesome Superhero Name"],
        ["Worst Flavor", "Best Flavor"],
        ["Boring Museum Exhibit", "Mind-Blowing Museum Exhibit"],
        ["Terrible Band Name", "Awesome Band Name"],
        ["Worst Yearbook Quote", "Best Yearbook Quote"],
        ["Lame Excuse", "Believable Excuse"],
        ["Terrible Mascot", "Lovable Mascot"],
        ["Worst Invention", "Life-Changing Invention"],
        ["Annoying Commercial", "Memorable Commercial"],
        ["Terrible Pickup Line", "Smooth Pickup Line"],
        ["Worst Sandwich Filling", "Best Sandwich Filling"],
        ["Boring Screensaver", "Hypnotic Screensaver"],
        ["Useless Life Hack", "Game-Changing Life Hack"],
        ["Terrible Sitcom Premise", "Hilarious Sitcom Premise"],
        ["Worst Karaoke Song", "Crowd-Pleasing Karaoke Song"],
        ["Annoying Social Media Trend", "Fun Social Media Trend"],
        ["Terrible Stage Name", "Unforgettable Stage Name"],
        ["Worst Tongue Twister", "Most Challenging Tongue Twister"],
        ["Boring Screensaver", "Mesmerizing Screensaver"],
        ["Terrible Tattoo", "Meaningful Tattoo"],
        ["Worst Bumper Sticker", "Clever Bumper Sticker"],
        ["Annoying Catchphrase", "Iconic Catchphrase"],
        ["Terrible Team Name", "Intimidating Team Name"],
        [
          "Worst Flavor Combination",
          "Unexpectedly Delicious Flavor Combination",
        ],
        ["Useless College Course", "Life-Changing College Course"],
        ["Terrible Podcast Topic", "Binge-Worthy Podcast Topic"],
        ["Worst Theme Park Ride", "Thrilling Theme Park Ride"],
        ["Annoying Pet Trick", "Impressive Pet Trick"],
        ["Terrible Workout", "Effective Workout"],
        ["Worst Board Game", "Addictive Board Game"],
        ["Annoying Habit", "Endearing Quirk"],
        ["Terrible Prank", "Harmless Prank"],
        ["Worst Cereal Mascot", "Beloved Cereal Mascot"],
        ["Annoying Alarm Sound", "Gentle Wake-Up Alarm"],
        ["Terrible Vacation Spot", "Dream Vacation Destination"],
        ["Worst Toy", "Must-Have Toy"],
        ["Annoying TV Character", "Fan-Favorite TV Character"],
        ["Terrible Superpower Side Effect", "Awesome Superpower Perk"],
        ["Worst Ice Cream Flavor", "Innovative Ice Cream Flavor"],
        ["Annoying Text Abbreviation", "Useful Text Abbreviation"],
        ["Terrible Costume Idea", "Creative Costume Idea"],
        ["Worst Cooking Mistake", "Game-Changing Cooking Tip"],
        ["Annoying Exercise", "Fun Exercise"],
        ["Terrible Breakup Method", "Respectful Breakup Method"],
        ["Worst Motivational Poster", "Actually Motivating Poster"],
        ["Annoying Car Feature", "Useful Car Feature"],
        ["Terrible Hiding Spot", "Clever Hiding Spot"],
        ["Worst Trend from Your Parents' Era", "Cool Retro Trend"],
        ["Annoying Tourist Behavior", "Respectful Tourist Behavior"],
        ["Terrible Roommate Habit", "Ideal Roommate Quality"],
        ["Worst Reason to Call in Sick", "Legitimate Reason to Call in Sick"],
        ["Annoying Phone Notification", "Important Phone Notification"],
        ["Terrible Boat Name", "Clever Boat Name"],
        ["Worst Reason to Break Up", "Valid Reason to Break Up"],
        ["Annoying Gym Behavior", "Proper Gym Etiquette"],
        ["Terrible Airline", "Top-Rated Airline"],
        ["Worst Bathroom Graffiti", "Profound Bathroom Graffiti"],
        ["Annoying Concert Behavior", "Considerate Concert Behavior"],
        ["Terrible Hogwarts House", "Best Hogwarts House"],
        ["Worst Reason to Get a Pet", "Great Reason to Get a Pet"],
        [
          "Annoying Email Subject Line",
          "Attention-Grabbing Email Subject Line",
        ],
        ["Terrible Wifi Network Name", "Clever Wifi Network Name"],
      ];

      function setTargetArea() {
        targetAngle = Math.random() * 180 - 90;
        const gradient = `conic-gradient(
                from -90deg at 50% 100%,
                #a4b0be 0deg ${targetAngle - 22.5 + 90}deg,
                #ff6b6b ${targetAngle - 22.5 + 90}deg ${
          targetAngle - 13.5 + 90
        }deg,
                #feca57 ${targetAngle - 13.5 + 90}deg ${
          targetAngle - 4.5 + 90
        }deg,
                #48dbfb ${targetAngle - 4.5 + 90}deg ${
          targetAngle + 4.5 + 90
        }deg,
                #feca57 ${targetAngle + 4.5 + 90}deg ${
          targetAngle + 13.5 + 90
        }deg,
                #ff6b6b ${targetAngle + 13.5 + 90}deg ${
          targetAngle + 22.5 + 90
        }deg,
                #a4b0be ${targetAngle + 22.5 + 90}deg 180deg
            )`;
        targetArea.style.background = gradient;
      }

      function setRandomClues() {
        const randomIndex = Math.floor(Math.random() * clues.length);
        const [left, right] = clues[randomIndex];
        document.getElementById("leftClue").textContent = left;
        document.getElementById("rightClue").textContent = right;
      }

      function calculateScore(angle) {
        const diff = Math.abs(angle - targetAngle);
        if (diff <= 4.5) {
            triggerConfetti();
            return 5
        };
        if (diff <= 13.5) return 3;
        if (diff <= 22.5) return 1;
        return 0;
      }

      function handleStart(e) {
        if (!canMoveNeedle) return;
        isDragging = true;
        e.preventDefault(); // Prevent default touch behavior
      }

      function triggerConfetti() {
  confetti({
    particleCount: 150,
    spread: 90,
    origin: { y: 0.6 },
    colors: ['#ff0000', '#00ff00', '#0000ff'], // Custom colors
    ticks: 200, // How long the animation lasts
    shapes: ['square'], // Use only square confetti
    gravity: 0.8, // Slightly increase gravity
    scalar: 1.2 // Make the confetti a bit larger
  });
}

      function handleMove(e) {
        if (!isDragging || !canMoveNeedle) return;
        e.preventDefault(); // Prevent default touch behavior
        const rect = needleContainer.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.bottom;

        let clientX, clientY;
        if (e.type === "touchmove") {
          clientX = e.touches[0].clientX;
          clientY = e.touches[0].clientY;
        } else {
          clientX = e.clientX;
          clientY = e.clientY;
        }

        const angle =
          (Math.atan2(clientX - centerX, centerY - clientY) * 180) / Math.PI;
        const clampedAngle = Math.max(-90, Math.min(90, angle));
        needle.style.transform = `rotate(${clampedAngle}deg)`;
      }

      function handleEnd() {
        isDragging = false;
      }

      function hideNeedle() {
        needle.style.display = "none";
      }

      function showNeedle() {
        needle.style.display = "block";
      }

      // Mouse events
      needleContainer.addEventListener("mousedown", handleStart);
      document.addEventListener("mousemove", handleMove);
      document.addEventListener("mouseup", handleEnd);

      // Touch events
      needleContainer.addEventListener("touchstart", handleStart);
      document.addEventListener("touchmove", handleMove);
      document.addEventListener("touchend", handleEnd);

      toggleButton.addEventListener("click", () => {
        isTargetVisible = !isTargetVisible;
        targetArea.style.display = isTargetVisible ? "block" : "none";
        if (!isTargetVisible) {
          toggleButton.textContent = "Reveal Target";
          scoreElement.textContent = "";
          showNeedle();
          canMoveNeedle = true; // Allow needle movement when target is hidden
        } else {
          toggleButton.style.display = "none";
          const needleAngle =
            parseFloat(
              needle.style.transform.replace("rotate(", "").replace("deg)", "")
            ) || 0;
          const score = calculateScore(needleAngle);
          totalScore += score;
          scoreElement.textContent = `Score: ${score} points`;
          totalScoreElement.textContent = `Total Score: ${totalScore}`;
          canMoveNeedle = false; // Disable needle movement when target is revealed
        }
      });

      nextRoundButton.addEventListener("click", () => {
        setTargetArea();
        setRandomClues();
        isTargetVisible = true;
        targetArea.style.display = "block";
        toggleButton.textContent = "Hide Target";
        toggleButton.style.display = "inline-block";
        needle.style.transform = "rotate(0deg)";
        scoreElement.textContent = "";
        hideNeedle();
        canMoveNeedle = false; // Re-enable needle movement for the next round
      });

      newGameButton.addEventListener("click", () => {
        totalScore = 0;
        setTargetArea();
        setRandomClues();
        isTargetVisible = true;
        targetArea.style.display = "block";
        toggleButton.textContent = "Hide Target";
        toggleButton.style.display = "inline-block";
        needle.style.transform = "rotate(0deg)";
        scoreElement.textContent = "";
        totalScoreElement.textContent = "Total Score: 0";
        hideNeedle();
      });

      // Initialize the game
      setTargetArea();
      setRandomClues();
      hideNeedle();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
  </body>
</html>
